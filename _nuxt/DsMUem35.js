import{f,N as S,M as w,ad as c,k as v,o as p,w as m,r as h,l as o,S as L,s as x,as as z,at as $,au as y,av as A,$ as E,al as R,a9 as B,aa as k,n as I,m as b,V as j,ao as M}from"./D2Xi5cnB.js";const[q,D]=w("AvatarRoot"),F=f({__name:"AvatarRoot",props:{asChild:{type:Boolean},as:{default:"span"}},setup(s){return S(),D({imageLoadingStatus:c("idle")}),(e,t)=>(p(),v(o(L),{"as-child":e.asChild,as:e.as},{default:m(()=>[h(e.$slots,"default")]),_:3},8,["as-child","as"]))}});function C(s,e){return s?e?(s.src!==e&&(s.src=e),s.complete&&s.naturalWidth>0?"loaded":"loading"):"error":"idle"}function N(s,{referrerPolicy:e,crossOrigin:t}={}){const r=c(!1),n=c(null),i=x(()=>r.value?(!n.value&&z&&(n.value=new window.Image),n.value):null),u=c(C(i.value,s.value)),d=l=>()=>{r.value&&(u.value=l)};return $(()=>{r.value=!0,y(l=>{const a=i.value;if(!a)return;u.value=C(a,s.value);const g=d("loaded"),_=d("error");a.addEventListener("load",g),a.addEventListener("error",_),e!=null&&e.value&&(a.referrerPolicy=e.value),typeof(t==null?void 0:t.value)=="string"&&(a.crossOrigin=t.value),l(()=>{a.removeEventListener("load",g),a.removeEventListener("error",_)})})}),A(()=>{r.value=!1}),u}const P=f({__name:"AvatarImage",props:{src:{},referrerPolicy:{},crossOrigin:{},asChild:{type:Boolean},as:{default:"img"}},emits:["loadingStatusChange"],setup(s,{emit:e}){const t=s,r=e,{src:n,referrerPolicy:i,crossOrigin:u}=E(t);S();const d=q(),l=N(n,{referrerPolicy:i,crossOrigin:u});return R(l,a=>{r("loadingStatusChange",a),a!=="idle"&&(d.imageLoadingStatus.value=a)},{immediate:!0}),(a,g)=>B((p(),v(o(L),{role:"img","as-child":a.asChild,as:a.as,src:o(n),"referrer-policy":o(i)},{default:m(()=>[h(a.$slots,"default")]),_:3},8,["as-child","as","src","referrer-policy"])),[[k,o(l)==="loaded"]])}}),G=f({__name:"Avatar",props:{class:{},size:{default:"sm"},shape:{default:"circle"}},setup(s){const e=s;return(t,r)=>(p(),v(o(F),{class:I(o(b)(o(U)({size:t.size,shape:t.shape}),e.class))},{default:m(()=>[h(t.$slots,"default")]),_:3},8,["class"]))}}),H=f({__name:"AvatarImage",props:{src:{},referrerPolicy:{},crossOrigin:{},asChild:{type:Boolean},as:{}},setup(s){const e=s;return(t,r)=>(p(),v(o(P),j(e,{class:"size-full object-cover"}),{default:m(()=>[h(t.$slots,"default")]),_:3},16))}}),U=M("bg-secondary text-foreground inline-flex shrink-0 select-none items-center justify-center overflow-hidden font-normal",{variants:{size:{sm:"size-10 text-xs",base:"size-16 text-2xl",lg:"size-32 text-5xl"},shape:{circle:"rounded-full",square:"rounded-md"}}});export{G as _,H as a};
