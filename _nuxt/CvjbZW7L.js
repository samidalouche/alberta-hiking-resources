import{d as B,g as x,j as G,k as O,h as k,o as P,a as M,l as g,z as N,q as i,P as V,p as w,s as c,x as A}from"./Cf3UvwjG.js";import{f as $,E as j,a as D}from"./Cb3gTCdy.js";const[H,U]=A("RovingFocusGroup");var z=B({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(F,{expose:b,emit:I}){const a=F,p=I,{loop:S,orientation:f,dir:y}=x(a),v=G(y),l=O(a,"currentTabStopId",p,{defaultValue:a.defaultCurrentTabStopId,passive:a.currentTabStopId===void 0}),r=c(!1),n=c(!1),d=c(0),{getItems:m,CollectionSlot:T}=k({isProvider:!0});function C(e){const o=!n.value;if(e.currentTarget&&e.target===e.currentTarget&&o&&!r.value){const s=new CustomEvent(j,D);if(e.currentTarget.dispatchEvent(s),p("entryFocus",s),!s.defaultPrevented){const u=m().map(t=>t.ref).filter(t=>t.dataset.disabled!==""),R=u.find(t=>t.getAttribute("data-active")===""),_=u.find(t=>t.getAttribute("data-highlighted")===""),q=u.find(t=>t.id===l.value),E=[R,_,q,...u].filter(Boolean);$(E,a.preventScrollOnEntryFocus)}}n.value=!1}function h(){setTimeout(()=>{n.value=!1},1)}return b({getItems:m}),U({loop:S,dir:v,orientation:f,currentTabStopId:l,onItemFocus:e=>{l.value=e},onItemShiftTab:()=>{r.value=!0},onFocusableItemAdd:()=>{d.value++},onFocusableItemRemove:()=>{d.value--}}),(e,o)=>(P(),M(i(T),null,{default:g(()=>[N(i(V),{tabindex:r.value||d.value===0?-1:0,"data-orientation":i(f),as:e.as,"as-child":e.asChild,dir:i(v),style:{outline:"none"},onMousedown:o[0]||(o[0]=s=>n.value=!0),onMouseup:h,onFocus:C,onBlur:o[1]||(o[1]=s=>r.value=!1)},{default:g(()=>[w(e.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),J=z;export{J as R,H as i};
