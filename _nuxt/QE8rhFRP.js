import{d as f,b$ as C,bZ as S,bd as c,b as v,o as p,w as m,r as _,u as r,c0 as b,a as x,ck as A,bF as L,cl as w,bG as z,v as q,i as R,b9 as E,ba as I,n as $,e as B,m as P,bm as k}from"./BeUjFpHr.js";const[j,O]=S("AvatarRoot");var F=f({__name:"AvatarRoot",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(e){return C(),O({imageLoadingStatus:c("idle")}),(a,s)=>(p(),v(r(b),{"as-child":a.asChild,as:a.as},{default:m(()=>[_(a.$slots,"default")]),_:3},8,["as-child","as"]))}}),M=F;function y(e,a){return e?a?(e.src!==a&&(e.src=a),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function D(e,{referrerPolicy:a,crossOrigin:s}={}){const o=c(!1),n=c(null),i=x(()=>o.value?(!n.value&&A&&(n.value=new window.Image),n.value):null),u=c(y(i.value,e.value)),d=l=>()=>{o.value&&(u.value=l)};return L(()=>{o.value=!0,w(l=>{const t=i.value;if(!t)return;u.value=y(t,e.value);const g=d("loaded"),h=d("error");t.addEventListener("load",g),t.addEventListener("error",h),a?.value&&(t.referrerPolicy=a.value),typeof s?.value=="string"&&(t.crossOrigin=s.value),l(()=>{t.removeEventListener("load",g),t.removeEventListener("error",h)})})}),z(()=>{o.value=!1}),u}var G=f({__name:"AvatarImage",props:{src:{type:String,required:!0},referrerPolicy:{type:null,required:!1},crossOrigin:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"img"}},emits:["loadingStatusChange"],setup(e,{emit:a}){const s=e,o=a,{src:n,referrerPolicy:i,crossOrigin:u}=q(s);C();const d=j(),l=D(n,{referrerPolicy:i,crossOrigin:u});return R(l,t=>{o("loadingStatusChange",t),t!=="idle"&&(d.imageLoadingStatus.value=t)},{immediate:!0}),(t,g)=>E((p(),v(r(b),{role:"img","as-child":t.asChild,as:t.as,src:r(n),"referrer-policy":r(i)},{default:m(()=>[_(t.$slots,"default")]),_:3},8,["as-child","as","src","referrer-policy"])),[[I,r(l)==="loaded"]])}}),U=G;const H=f({__name:"Avatar",props:{class:{},size:{default:"sm"},shape:{default:"circle"}},setup(e){const a=e;return(s,o)=>(p(),v(r(M),{class:$(r(B)(r(W)({size:e.size,shape:e.shape}),a.class))},{default:m(()=>[_(s.$slots,"default")]),_:3},8,["class"]))}}),J=f({__name:"AvatarImage",props:{src:{},referrerPolicy:{},crossOrigin:{},asChild:{type:Boolean},as:{}},setup(e){const a=e;return(s,o)=>(p(),v(r(U),P(a,{class:"size-full object-cover"}),{default:m(()=>[_(s.$slots,"default")]),_:3},16))}}),W=k("bg-secondary text-foreground inline-flex shrink-0 select-none items-center justify-center overflow-hidden font-normal",{variants:{size:{sm:"size-10 text-xs",base:"size-16 text-2xl",lg:"size-32 text-5xl"},shape:{circle:"rounded-full",square:"rounded-md"}}});export{H as _,J as a};
